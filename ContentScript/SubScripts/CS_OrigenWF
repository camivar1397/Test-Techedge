/*
████████╗███████╗ ██████╗██╗  ██╗███████╗██████╗  ██████╗ ███████╗    ████████╗███████╗ █████╗ ███╗   ███╗
╚══██╔══╝██╔════╝██╔════╝██║  ██║██╔════╝██╔══██╗██╔════╝ ██╔════╝    ╚══██╔══╝██╔════╝██╔══██╗████╗ ████║
   ██║   █████╗  ██║     ███████║█████╗  ██║  ██║██║  ███╗█████╗         ██║   █████╗  ███████║██╔████╔██║
   ██║   ██╔══╝  ██║     ██╔══██║██╔══╝  ██║  ██║██║   ██║██╔══╝         ██║   ██╔══╝  ██╔══██║██║╚██╔╝██║
   ██║   ███████╗╚██████╗██║  ██║███████╗██████╔╝╚██████╔╝███████╗       ██║   ███████╗██║  ██║██║ ╚═╝ ██║
   ╚═╝   ╚══════╝ ╚═════╝╚═╝  ╚═╝╚══════╝╚═════╝  ╚═════╝ ╚══════╝       ╚═╝   ╚══════╝╚═╝  ╚═╝╚═╝     ╚═╝
                                            ╦╔╗╔╔═╗╔═╗╦╦═╗╦╔╗╔╔═╗  ╔╦╗╦═╗╦ ╦╔═╗╔╦╗  ╔═╗╦  ╔═╗╔╗ ╔═╗╦  ╦ ╦ ╦
                                            ║║║║╚═╗╠═╝║╠╦╝║║║║║ ╦   ║ ╠╦╝║ ║╚═╗ ║   ║ ╦║  ║ ║╠╩╗╠═╣║  ║ ╚╦╝
                                            ╩╝╚╝╚═╝╩  ╩╩╚═╩╝╚╝╚═╝   ╩ ╩╚═╚═╝╚═╝ ╩   ╚═╝╩═╝╚═╝╚═╝╩ ╩╩═╝╩═╝╩ 
*/
/***** CS para obtener los origenes de los WorkFlow - LPA 13/02/2020 BEGIN *****/
def workID = args[0]  
def result = [:]
 
try{
    BuscarWF(workID,result)  
}catch(e){
    result.msgdesc = "Error: " + e
	result.msgcode = "false"
}
return result

//función para retornar el PerformerID de los SWF
def BuscarWF(String id, result){
    def sqlCode = """SELECT 'Interna' AS Origen, ZMem.VolumeID AS ID
                     FROM Z_COR_Memorando ZMem
                     INNER JOIN WWork WWM ON (ZMem.VolumeID = WWM.Work_WorkID)
                     INNER JOIN WSubWork WSM ON (WWM.Work_WorkID = WSM.SubWork_WorkID) AND (WWM.Work_WorkID = WSM.SubWork_SubWorkID)
                     WHERE ZMem.RowSeqNum = 1 AND ZMem.VolumeID = ${id}
                     UNION ALL
                     SELECT 'Externa' AS Origen, ZCarta.VolumeID AS ID
                     FROM Z_COR_Carta ZCarta
                     INNER JOIN WWork WWC ON (ZCarta.VolumeID = WWC.Work_WorkID)
                     INNER JOIN WSubWork WSC ON (WWC.Work_WorkID = WSC.SubWork_WorkID) AND (WWC.Work_WorkID = WSC.SubWork_SubWorkID)
                     WHERE ZCarta.RowSeqNum = 1 AND ZCarta.VolumeID = ${id}
                  """
    Boolean cursorEnabled = false 
    Boolean transactionEnabled = false
    Integer recordLimit = 1
    def consult = sql.runSQLFast(sqlCode,  cursorEnabled,  transactionEnabled,  recordLimit).rows    
    if(consult){ 
        result.msgdesc = "Origen del radicado obtenido exitosamente"
        result.msgcode = "true"
        result.result = consult
    }
    else{
        return []
    }
}
/***** CS para obtener los origenes de los WorkFlow - LPA 13/02/2020 *****/